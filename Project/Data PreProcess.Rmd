---
output: html_document
date: "2024-06-21"
---


```{r load-packages, message=FALSE, include=FALSE}
library(knitr)
library(tidyverse)
library(broom)
library(htmltools)
library(janitor)
library(kableExtra)
```

```{r setup, include = FALSE}
opts_chunk$set(echo=FALSE) # hide source code in the document
knitr::opts_chunk$set(fig.width=7, fig.height=3.5)
```


```{r echo=FALSE}
Election_results <- read.csv("../data/Translated/elect_results_t.csv")

Properties_rooms <- read.csv("../data/Translated/properties_by_rooms_t.csv")

Purcheuses <- read.csv("../data/Translated/property_purchases_t.csv")

Vacant_apartments <- read.csv("../data/Translated/vacant_apartments_t.csv")

Election_results

Properties_rooms

Purcheuses

Vacant_apartments
```

```{r}
# Renaming the Hebrew variables:
Election_results <- Election_results %>% 
  rename(
    Avoda = "אמת",
    Hofesh_Calcali = "אצ",
    Habait_Hayhudi = "ב",
    Yahadut_Hator = "ג",
    Balad = "ד",
    Hadash = "ום",
    Shahar_Koach = "ז",
    Kama = "זך",
    Koach_Lehaspia = "זנ",
    Tsomet = "זץ",
    Tsionot_Datit = "ט",
    Israel_Hofshit = "י",
    Hacalalit = "יז",
    Ihud_Benei_Brit = "ינ",
    Tsav_Hashaa = "יץ",
    Gush_Tanachi = "יק",
    Machane_Mamalachti = "כן",
    Ani_VeAta = "ך",
    Israel_beitenu = "ל",
    Halicud = "מחל",
    Merets = "מרצ",
    Kvod_Haadam = "נז",
    Nativ = "ני",
    Shema = "נף",
    Atsmaiem = "נץ",
    Yesh_kivun = "נק",
    Anachnu = "נר",
    Reshima_Aravit = "עם",
    Yesh_atid = "פה",
    Piratim = "ף",
    Tseirim_boarim = "צ",
    Manhigut_Hevratit = "ץ",
    Kol_Hasviva = "ק",
    Halev_hayehudi = "קי",
    Seder_hadash = "קך",
    Kol_koveaa = "קנ",
    Beomets = "קץ",
    Reshimat_34 = "רז",
    Shas = "שס",
    Ale_yarok = "ת"
  )

# mutate the names of the cities that are in other datasets.
Election_results <- Election_results %>% 
  mutate(
    settlement.name = case_when(
    settlement.name =="horizons" ~ "Ofakim",
    settlement.name =="The view of the Galilee" ~ "Nof Hagalil",
    settlement.name == "my peace" ~  "Shlomi" ,
    settlement.name == "routes" ~ "Netivot",
    TRUE ~ settlement.name  # Keeps other values unchanged
    )
  )
```

```{r}
Properties_rooms_Citynames <- Properties_rooms[!duplicated(Properties_rooms$CityLMSName_Translated),]

#mutate the names of the cities
Properties_rooms <- Properties_rooms %>% 
  mutate(
    CityLMSName_Translated = case_when(
    CityLMSName_Translated =="horizons" ~ "Ofakim",
    CityLMSName_Translated =="The view of the Galilee" ~ "Nof Hagalil",
    CityLMSName_Translated == "my peace" ~  "Shlomi" ,
    CityLMSName_Translated == "streets" ~ "Rehovot",
    CityLMSName_Translated == "רחובות" ~ "Rehovot",
    CityLMSName_Translated == "routes" ~ "Netivot",
    TRUE ~ CityLMSName_Translated  # Keeps other values unchanged
    )
  )

# replace the columns with translated columns
Properties_rooms$CityLMSName <- Properties_rooms$CityLMSName_Translated
Properties_rooms <- Properties_rooms %>% clean_names()

# remove duplicated translated columns 
Properties_rooms <- Properties_rooms[, !grepl("translated$", names(Properties_rooms))]

# check city names:
# Purcheuses_names <- Purcheuses[!duplicated(Purcheuses$Lamas_name_translated),]
# Purcheuses_names <- Purcheuses_names[c("Lamas_name","Lamas_name_translated")]
# Purcheuses_names

# preform the same for the other datasets
Purcheuses <- Purcheuses %>% 
  mutate(
    Lamas_name_translated = case_when(
    Lamas_name_translated =="horizons" ~ "Ofakim",
    Lamas_name_translated =="The view of the Galilee" ~ "Nof Hagalil",
    Lamas_name_translated == "my peace" ~  "Shlomi" ,
    Lamas_name_translated == "routes" ~ "Netivot",
    Lamas_name_translated == "streets" ~ "Rehovot",
    Lamas_name_translated == "רחובות" ~ "Rehovot",
    Lamas_name_translated == "fresh" ~ "Raanana",
    TRUE ~ Lamas_name_translated  # Keeps other values unchanged
    )
  )

Purcheuses$Lamas_name <- Purcheuses$Lamas_name_translated
Purcheuses <- Purcheuses[, !grepl("translated$", names(Purcheuses))]
Purcheuses <- Purcheuses %>% clean_names()

# Vacant_apartments_names <- Vacant_apartments[!duplicated(Vacant_apartments$CityLmsName_Translated),]
# Vacant_apartments_names <- Vacant_apartments_names[c("CityLmsName","CityLmsName_Translated")]
# Vacant_apartments_names


Vacant_apartments <- Vacant_apartments %>% 
  mutate(
    CityLmsName_Translated = case_when(
    CityLmsName_Translated =="horizons" ~ "Ofakim",
    CityLmsName_Translated =="The view of the Galilee" ~ "Nof Hagalil",
    CityLmsName_Translated == "my peace" ~  "Shlomi" ,
    CityLmsName_Translated == "routes" ~ "Netivot",
    CityLmsName_Translated == "my peace" ~ "Shlomi",
    TRUE ~ CityLmsName_Translated  # Keeps other values unchanged
    )
  )



Vacant_apartments$CityLmsName <- Vacant_apartments$CityLmsName_Translated
Vacant_apartments$CompanyName <- Vacant_apartments$CompanyName_Translated
Vacant_apartments$StatusName <- Vacant_apartments$StatusName_Translated
Vacant_apartments$PropertyTypeName <- Vacant_apartments$PropertyTypeName_Translated
```

```{r}

Vacant_apartments <- Vacant_apartments[, !grepl("translated$", names(Vacant_apartments))]
Vacant_apartments <- Vacant_apartments %>% clean_names()
```

```{r}
#renaming elections table:
Election_results <- Election_results %>% 
  mutate(
    settlement.name = case_when(
    settlement.name =="horizons" ~ "Ofakim",
    settlement.name =="The view of the Galilee" ~ "Nof Hagalil",
    settlement.name == "my peace" ~  "Shlomi" ,
    settlement.name == "routes" ~ "Netivot",
    settlement.name == "my peace" ~ "Shlomi",
    settlement.name == "streets" ~ "Rehovot",
    settlement.name == "רחובות" ~ "Rehovot",
    settlement.name == "fresh" ~ "Raanana",
    TRUE ~ settlement.name  # Keeps other values unchanged
    )
  )


```

```{r include=FALSE, paged.print=TRUE}
Vacant_apartments

Purcheuses <- Purcheuses %>% 
  rename(
    city_lms_name = "lamas_name"
  )
Purcheuses

Properties_rooms
```

```{r}
# Group the dataframe by 'settlement.ID'
grouped_by_settlement <- Election_results %>% group_by(settlement.ID)

# Select columns from index 11 onwards (assuming 'settlement.ID' is column 11)
cols_to_sum <- names(Election_results)[8:ncol(Election_results)]

# Sum each column from 12 onwards within each settlement group
settlement_sums <- grouped_by_settlement %>%
  summarise(across(cols_to_sum, sum))  # Sum each column using 'across'

citynames_and_id <- Election_results %>% distinct(settlement.ID,settlement.name)

settlement_sums <- left_join(settlement_sums, citynames_and_id, by = "settlement.ID")

# Print the summary table with settlement ID and summed column values
print(settlement_sums)
```

```{r}
chopped_elections_sum <- settlement_sums[, 6:ncol(settlement_sums)]

chopped_elections_sum$max_value <- apply(chopped_elections_sum, 1, max)

set.seed(123)
# Function to get column name of max value in each row
max_col_names <- apply(chopped_elections_sum, 1, function(row) {
  colnames(chopped_elections_sum)[which.max(row)]
})

# Add the result as a new column to the original data frame
chopped_elections_sum$max_col_name <- max_col_names

find_max_value <- function(row) {
  if (any(is.na(row))) {
    NA  # Return NA if there are any NA values in the row
  } else {
    max(row)
  }
}



chopped_elections_sum$max_value <- apply(chopped_elections_sum, 1, function(row) max(as.numeric(row), na.rm = TRUE))

new_elections_sum <- chopped_elections_sum[,(ncol(chopped_elections_sum)-2):ncol(chopped_elections_sum)]

new_elections_sum <- left_join(new_elections_sum, citynames_and_id, by = "settlement.name")
new_elections_sum <- new_elections_sum[,c(4,1,3,2)]
hepler_df <- settlement_sums[,c(1,2,3)]

new_elections_sum <- left_join(new_elections_sum, hepler_df, by = "settlement.ID")
new_elections_sum$VoterPrecentage <- new_elections_sum$Voters/new_elections_sum$BZB
new_elections_sum$Party.Precentage <- new_elections_sum$max_value/new_elections_sum$Voters
new_elections_sum
Kneset25_summed <- new_elections_sum
```
```{r}
Kneset21 <- read.csv("../data/Translated/kneset21.csv")

Kneset22 <- read.csv("../data/Translated/kneset22.csv")

Kneset23 <- read.csv("../data/Translated/Kneset23.csv")

Kneset24 <- read.csv("../data/Translated/Kneset24.csv")
```

```{r}
Kneset21
Kneset22
Kneset23
Kneset24
```

```{r}
# Renaming the Hebrew variables:
Kneset21 <- Kneset21 %>% 
  rename(
    Avoda = "אמת",
    Yahadut_Hatora = "ג",
    Balad = "דעם",
    Hadash = "ום",
    Zehut = "ז",
    Vatikim = "זי",
    BritOlam = "זך",
    Yahad = "זנ",
    Zomet = "זץ",
    Bait_Yehudi = "טב",
    Yashar = "י",
    Gush_Tanachi = "יז",
    Bnei_Brit = "ין",
    Acharayut = "יץ",
    Kulanu_Yamin = "כ",
    Tikva_Leshinui = "ךק",
    Israel_Beitenu = "ל",
    Halicud = "מחל",
    Merets = "מרצ",
    Yamin_Hadash = "נ",
    Betach = "ן",
    Zchutotinu = "נז",
    Kvod_haadam = "ןך",
    Reforma = "נך",
    Manhigut_Hevratit = "ןנ",
    Magen = "נץ",
    Gesher = "נר",
    Kahul_lavan = "פה",
    Piratim = "ףז",
    Pashut_Ahava = "ףי",
    Hinuch = "ףך",
    Shavim = "ףנ",
    NaNach = "ףץ",
    Calacla_Yeroka = "ץ",
    Ofek_Hadash = "ץז",
    Ani_VeAta = "ץי",
    Zedek_Hevrati = "צק",
    Zedek_Lakol = "ק",
    Erez_Israel_Shelano = "קי",
    Mehathala = "קן",
    Kol_Israel = "קף",
    Reshima_Aravit = "ר",
    Shas = "שס",
  )

# mutate the names of the cities that are in other datasets.
Kneset21 <- Kneset21 %>% 
  mutate(
    settlement.name = case_when(
    settlement.name =="horizons" ~ "Ofakim",
    settlement.name =="The view of the Galilee" ~ "Nof Hagalil",
    settlement.name == "my peace" ~  "Shlomi" ,
    settlement.name == "routes" ~ "Netivot",
    TRUE ~ settlement.name  # Keeps other values unchanged
    )
  )
```

```{r}
# Renaming the Hebrew variables:
Kneset22 <- Kneset22 %>% 
  rename(
    Avoda = "אמת",
    Yahadut_Hatora = "ג",
    Hadash_Raam = "ודעם",
    Ozma_Calcalit = "ז",
    Democratura = "זכ",
    Zegut = "זן",
    Zomet = "זץ",
    Yamina = "טב",
    Manhigut_Hevratit = "י",
    Adom_lavan = "יז",
    Notsrit_liberalit = "ינ",
    Kvod_haadam = "יף",
    Gush_Tanachi = "יק",
    Noam = "כ",
    Ahdut_amamit = "כי",
    Otsma_yehudit = "כף",
    Israel_Beitenu = "ל",
    Halicud = "מחל",
    Merets = "מרצ",
    Mitkademt = "נ",
    Kavod_veshivion = "נך",
    Kol_Israel = "נץ",
    Kahul_Lavan = "פה",
    Piratim = "ףז",
    Zedek = "צ",
    Zafon = "צן",
    Daam = "ץ",
    Zchutotinu = "ק",
    Seder_Hadash = "קך",
    Kama = "קץ",
    Yamin_hiluni = "רק",
    Shas = "שס",
  )

# mutate the names of the cities that are in other datasets.
Kneset22 <- Kneset22 %>% 
  mutate(
    settlement.name = case_when(
    settlement.name =="horizons" ~ "Ofakim",
    settlement.name =="The view of the Galilee" ~ "Nof Hagalil",
    settlement.name == "my peace" ~  "Shlomi" ,
    settlement.name == "routes" ~ "Netivot",
    TRUE ~ settlement.name  # Keeps other values unchanged
    )
  )
```

```{r}
# Renaming the Hebrew variables:
Kneset23 <- Kneset23 %>% 
  rename(
    Avoda = "אמת",
    Yahadut_Hatora = "ג",
    Hadash_Raam = "ודעם",
    Ozma_Liberalit = "ז",
    Peula_LeIsrael = "זך",
    Zomet = "זץ",
    Yamina = "טב",
    Hazon = "י",
    Adom_lavan = "יז",
    Ihud_Habrit = "ינ",
    Gush_Tanachi = "יק",
    Manhigut_Hevratit = "יר",
    Halev_Hayuhudi = "כ",
    Ani_VeAta = "כן",
    Israel_Beitenu = "ל",
    Halicud = "מחל",
    Kol_Hanashim = "נ",
    Koach_Lehashpiaa = "נז",
    Kama = "ני",
    Mitkademet = "נק",
    Ozma_Yehudit = "נץ",
    Kahul_Lavan = "פה",
    Piratim = "ףז",
    Daam = "ץ",
    Israelist = "ק",
    Shema = "קי",
    Seder_Hadash = "קך",
    Mishpat_Zedek = "קץ",
    Shas = "שס",
  )

# mutate the names of the cities that are in other datasets.
Kneset23 <- Kneset23 %>% 
  mutate(
    settlement.name = case_when(
    settlement.name =="horizons" ~ "Ofakim",
    settlement.name =="The view of the Galilee" ~ "Nof Hagalil",
    settlement.name == "my peace" ~  "Shlomi" ,
    settlement.name == "routes" ~ "Netivot",
    TRUE ~ settlement.name  # Keeps other values unchanged
    )
  )
```

```{r}
# Renaming the Hebrew variables:
Kneset24 <- Kneset24 %>% 
  rename(
    Avoda = "אמת",
    Yamina = "ב",
    Yahadut_Hatora = "ג",
    Hadash_Raam = "ודעם",
    Zomet = "זץ",
    Zionot_datit = "ט",
    Gimlaim = "י",
    Hacalcalit_Hadash = "יז",
    Brit_Shotfut = "ינ",
    Gush_Tanachi = "יק",
    Manhigut_Hevratit = "יר",
    Kvod_haadam = "יף",
    Halev_Hayehudi = "כ",
    Ani_VeAta = "כך",
    Kahul_Lavan = "כן",
    Israel_Beitenu = "ל",
    Halicud = "מחל",
    Merets = "מרצ",
    Kama = "נ",
    Olam_Hadash = "ני",
    Anachnu = "נר",
    Reshima_aravit = "עם",
    Yesh_atid = "פה",
    Piratim = "ףז",
    Azmenu = "צי",
    Hets = "צף",
    Maan = "צכ",
    Daam = "ץ",
    Efshari = "ק",
    Shema = "קי",
    Seder_Hadash = "קך",
    Mishpat_Zedek = "קץ",
    Rapee = "ר",
    Hatikva_Leshinui = "ר",
    Democratit = "רק",
    Am_Shalem = "רף",
    Shas = "שס",
    Tikva_Hadasha = "ת",
  )

# mutate the names of the cities that are in other datasets.
Kneset24 <- Kneset24 %>% 
  mutate(
    settlement.name = case_when(
    settlement.name =="horizons" ~ "Ofakim",
    settlement.name =="The view of the Galilee" ~ "Nof Hagalil",
    settlement.name == "my peace" ~  "Shlomi" ,
    settlement.name == "routes" ~ "Netivot",
    TRUE ~ settlement.name  # Keeps other values unchanged
    )
  )
```


```{r}
# Group the dataframe by 'settlement.ID'
Kneset21_grouped <- Kneset21 %>% group_by(settlement.ID)

# Select columns from index 11 onwards (assuming 'settlement.ID' is column 11)
cols_to_sum <- names(Kneset21)[4:ncol(Kneset21)]

# Sum each column from 12 onwards within each settlement group
settlement_sums <- Kneset21_grouped %>%
  summarise(across(cols_to_sum, sum))  # Sum each column using 'across'

citynames_and_id <- Kneset21 %>% distinct(settlement.ID,settlement.name)

settlement_sums <- left_join(settlement_sums, citynames_and_id, by = "settlement.ID")

chopped_elections_sum <- settlement_sums[, 6:ncol(settlement_sums)]

chopped_elections_sum$max_value <- apply(chopped_elections_sum, 1, max)

set.seed(123)
# Function to get column name of max value in each row
max_col_names <- apply(chopped_elections_sum, 1, function(row) {
  colnames(chopped_elections_sum)[which.max(row)]
})

# Add the result as a new column to the original data frame
chopped_elections_sum$max_col_name <- max_col_names

find_max_value <- function(row) {
  if (any(is.na(row))) {
    NA  # Return NA if there are any NA values in the row
  } else {
    max(row)
  }
}



chopped_elections_sum$max_value <- apply(chopped_elections_sum, 1, function(row) max(as.numeric(row), na.rm = TRUE))

new_elections_sum <- chopped_elections_sum[,(ncol(chopped_elections_sum)-2):ncol(chopped_elections_sum)]

new_elections_sum <- left_join(new_elections_sum, citynames_and_id, by = "settlement.name")
new_elections_sum <- new_elections_sum[,c(4,1,3,2)]
hepler_df <- settlement_sums[,c(1,2,3)]

new_elections_sum <- left_join(new_elections_sum, hepler_df, by = "settlement.ID")
new_elections_sum$VoterPrecentage <- new_elections_sum$Voters/new_elections_sum$BZB
new_elections_sum$Party.Precentage <- new_elections_sum$max_value/new_elections_sum$Voters
Kneset21_summed <- new_elections_sum

Kneset21_summed
```

```{r}
# Group the dataframe by 'settlement.ID'
Kneset22_grouped <- Kneset22 %>% group_by(settlement.ID)

# Select columns from index 11 onwards (assuming 'settlement.ID' is column 11)
cols_to_sum <- names(Kneset22)[4:ncol(Kneset22)]

# Sum each column from 12 onwards within each settlement group
settlement_sums <- Kneset22_grouped %>%
  summarise(across(cols_to_sum, sum))  # Sum each column using 'across'

citynames_and_id <- Kneset22 %>% distinct(settlement.ID,settlement.name)

settlement_sums <- left_join(settlement_sums, citynames_and_id, by = "settlement.ID")

chopped_elections_sum <- settlement_sums[, 6:ncol(settlement_sums)]

chopped_elections_sum$max_value <- apply(chopped_elections_sum, 1, max)

set.seed(123)
# Function to get column name of max value in each row
max_col_names <- apply(chopped_elections_sum, 1, function(row) {
  colnames(chopped_elections_sum)[which.max(row)]
})

# Add the result as a new column to the original data frame
chopped_elections_sum$max_col_name <- max_col_names

find_max_value <- function(row) {
  if (any(is.na(row))) {
    NA  # Return NA if there are any NA values in the row
  } else {
    max(row)
  }
}



chopped_elections_sum$max_value <- apply(chopped_elections_sum, 1, function(row) max(as.numeric(row), na.rm = TRUE))

new_elections_sum <- chopped_elections_sum[,(ncol(chopped_elections_sum)-2):ncol(chopped_elections_sum)]

new_elections_sum <- left_join(new_elections_sum, citynames_and_id, by = "settlement.name")
new_elections_sum <- new_elections_sum[,c(4,1,3,2)]
hepler_df <- settlement_sums[,c(1,2,3)]

new_elections_sum <- left_join(new_elections_sum, hepler_df, by = "settlement.ID")
new_elections_sum$VoterPrecentage <- new_elections_sum$Voters/new_elections_sum$BZB
new_elections_sum$Party.Precentage <- new_elections_sum$max_value/new_elections_sum$Voters
Kneset22_summed <- new_elections_sum

Kneset22_summed
```

```{r}
# Group the dataframe by 'settlement.ID'
Kneset23_grouped <- Kneset23 %>% group_by(settlement.ID)

# Select columns from index 11 onwards (assuming 'settlement.ID' is column 11)
cols_to_sum <- names(Kneset23)[8:ncol(Kneset23)]

# Sum each column from 12 onwards within each settlement group
settlement_sums <- Kneset23_grouped %>%
  summarise(across(cols_to_sum, sum))  # Sum each column using 'across'

citynames_and_id <- Kneset23 %>% distinct(settlement.ID,settlement.name)

settlement_sums <- left_join(settlement_sums, citynames_and_id, by = "settlement.ID")

chopped_elections_sum <- settlement_sums[, 6:ncol(settlement_sums)]

chopped_elections_sum$max_value <- apply(chopped_elections_sum, 1, max)

set.seed(123)
# Function to get column name of max value in each row
max_col_names <- apply(chopped_elections_sum, 1, function(row) {
  colnames(chopped_elections_sum)[which.max(row)]
})

# Add the result as a new column to the original data frame
chopped_elections_sum$max_col_name <- max_col_names

find_max_value <- function(row) {
  if (any(is.na(row))) {
    NA  # Return NA if there are any NA values in the row
  } else {
    max(row)
  }
}



chopped_elections_sum$max_value <- apply(chopped_elections_sum, 1, function(row) max(as.numeric(row), na.rm = TRUE))

new_elections_sum <- chopped_elections_sum[,(ncol(chopped_elections_sum)-2):ncol(chopped_elections_sum)]

new_elections_sum <- left_join(new_elections_sum, citynames_and_id, by = "settlement.name")
new_elections_sum <- new_elections_sum[,c(4,1,3,2)]
hepler_df <- settlement_sums[,c(1,2,3)]

new_elections_sum <- left_join(new_elections_sum, hepler_df, by = "settlement.ID")
new_elections_sum$VoterPrecentage <- new_elections_sum$Voters/new_elections_sum$BZB
new_elections_sum$Party.Precentage <- new_elections_sum$max_value/new_elections_sum$Voters
Kneset23_summed <- new_elections_sum

Kneset23_summed
```

```{r}
# Group the dataframe by 'settlement.ID'
Kneset24_grouped <- Kneset24 %>% group_by(settlement.ID)

# Select columns from index 11 onwards (assuming 'settlement.ID' is column 11)
cols_to_sum <- names(Kneset24)[8:ncol(Kneset24)]

# Sum each column from 12 onwards within each settlement group
settlement_sums <- Kneset24_grouped %>%
  summarise(across(cols_to_sum, sum))  # Sum each column using 'across'

citynames_and_id <- Kneset24 %>% distinct(settlement.ID,settlement.name)

settlement_sums <- left_join(settlement_sums, citynames_and_id, by = "settlement.ID")

chopped_elections_sum <- settlement_sums[, 6:ncol(settlement_sums)]

chopped_elections_sum$max_value <- apply(chopped_elections_sum, 1, max)

set.seed(123)
# Function to get column name of max value in each row
max_col_names <- apply(chopped_elections_sum, 1, function(row) {
  colnames(chopped_elections_sum)[which.max(row)]
})

# Add the result as a new column to the original data frame
chopped_elections_sum$max_col_name <- max_col_names

find_max_value <- function(row) {
  if (any(is.na(row))) {
    NA  # Return NA if there are any NA values in the row
  } else {
    max(row)
  }
}



chopped_elections_sum$max_value <- apply(chopped_elections_sum, 1, function(row) max(as.numeric(row), na.rm = TRUE))

new_elections_sum <- chopped_elections_sum[,(ncol(chopped_elections_sum)-2):ncol(chopped_elections_sum)]

new_elections_sum <- left_join(new_elections_sum, citynames_and_id, by = "settlement.name")
new_elections_sum <- new_elections_sum[,c(4,1,3,2)]
hepler_df <- settlement_sums[,c(1,2,3)]

new_elections_sum <- left_join(new_elections_sum, hepler_df, by = "settlement.ID")
new_elections_sum$VoterPrecentage <- new_elections_sum$Voters/new_elections_sum$BZB
new_elections_sum$Party.Precentage <- new_elections_sum$max_value/new_elections_sum$Voters
Kneset24_summed <- new_elections_sum

Kneset24_summed
```
```{r}
write.csv(Kneset21_summed, "../data/Translated/Kneset21_summed.csv")
write.csv(Kneset22_summed, "../data/Translated/Kneset22_summed.csv")
write.csv(Kneset23_summed, "../data/Translated/Kneset23_summed.csv")
write.csv(Kneset24_summed, "../data/Translated/Kneset24_summed.csv")
write.csv(Kneset25_summed, "../data/Translated/Kneset25_summed.csv")
```

## Appendix

### Data README

```{r include_data_readme, comment=''}
cat(readLines('../data/README.md'), sep = '\n')
```

